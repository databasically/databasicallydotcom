<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>WSUS 3.0 memory usage and how to adjust it</title>
    <link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <meta content='Ruby enthusiasts, mostly based in Kansas City, KS, USA.' name='description'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300' rel='stylesheet' type='text/css'>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
</html>
<body>
  <div class='container-narrow'>
    <div class='masthead'>
      <ul class='nav nav-pills pull-right'>
        <li>
          <a href='/'>Home</a>
        </li>
        <li>
          <a href='/articles'>Articles</a>
        </li>
        <li>
          <a href='/contact'>Contact</a>
        </li>
      </ul>
      <h3 class='muted'>
        <a href='/'>Databasically</a>
      </h3>
    </div>
    <div class='row-fluid'>
      <div class='span12 article'>
        <h1>WSUS 3.0 memory usage and how to adjust it</h1>
        <h3 class='muted pull-right post_date'>
          Nov 10 2008
        </h3>
        I set up a new Windows 2003 R2 Small Business Server (SBS) last week and I'm going over it and tweaking things.
        <br><br>
        While looking at the task manager, I noticed a process that was using 1.6 GB of RAM.  This sqlserver.exe process was going wild!
        <br><br>
        I turned on the process IDs in Task Manager (View &gt; Select Columns) so I could get a process ID for the offending process.  For me, it was process id <strong>1664</strong>.  Then, I turned to the console for some troubleshooting:
        <pre class="highlight shell">C:<span class="se">\t</span>asklist /svc /fi <span class="s2">&quot;PID eq 1664&quot;</span></pre>You should change your process id to match if you're running this at home.
        <pre class="highlight shell">Image Name                     PID Services
        <span class="o">=========================</span> <span class="o">========</span> <span class="o">=======================</span>
        sqlservr.exe                  1664 MSSQL<span class="nv">$MICROSOFT</span><span class="c">##SSEE</span></pre>
        ﻿﻿﻿
        Microsoft SSEE shows in the services panel as Windows Internal Database, which is the database for Windows Software Update Services.  Now that we know the instance name, we can reconfigure it:
        <br><br>
        <pre class="highlight shell">C:<span class="se">\o</span>sql -E -S &lt;servername&gt;MICROSOFT##SSEE
        <span class="gp">﻿1&gt; </span>sp_configure ’show advanced options’, 1;
        <span class="gp">2&gt; </span>reconfigure;
        <span class="gp">3&gt; </span>go
        Configuration option ’show advanced options’ changed from 0 to 1.
          Run the RECONFIGURE statement to install.
        <span class="gp">1&gt; </span>sp_configure ‘max server memory’, 512;
        <span class="gp">2&gt; </span>reconfigure;
        <span class="gp">3&gt; </span>go
        Configuration option ‘max server memory <span class="o">(</span>MB<span class="o">)</span>’ changed from
          2147483647 to 512. Run the RECONFIGURE statement to install.
        <span class="gp">1&gt; </span><span class="nb">exit</span>&lt;/servername&gt;</pre>
        <br><br>
        While you're at it, you may want to reconfigure the SBSMONITORING database instance if you're running SBS.  I set mine to 70 MB.
      </div>
    </div>
  </div>
  <footer class='footer'>
    <div class='container'>
      <p class='pull-left muted'>
        Established 2005 &middot; Databasically &copy;
        2013
      </p>
      <p class='pull-right'>
        <a href='#'>Back to top</a>
      </p>
    </div>
  </footer>
  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2626511-3']);
    _gaq.push(['_setDomainName', 'databasically.com']);
    _gaq.push(['_trackPageview']);
    
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script>
    // Function to slabtext the H1 headings
    function slabTextHeadlines() {
        $("h1").slabText({
            // Don't slabtext the headers if the viewport is under 380px
            "viewportBreakpoint":380,
            "minCharsPerLine":9
        });
    };
    
    $(window).load(function() {
        slabTextHeadlines();
    });
  </script>
</body>
