<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Simplifying Library Requires With $LOAD_PATH</title>
    <link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <meta content='Ruby enthusiasts, mostly based in Kansas City, KS, USA.' name='description'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300' rel='stylesheet' type='text/css'>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
</html>
<body>
  <div class='container-narrow'>
    <div class='masthead'>
      <ul class='nav nav-pills pull-right'>
        <li>
          <a href='/'>Home</a>
        </li>
        <li>
          <a href='/articles'>Articles</a>
        </li>
        <li>
          <a href='/contact'>Contact</a>
        </li>
      </ul>
      <h3 class='muted'>
        <a href='/'>Databasically</a>
      </h3>
    </div>
    <div class='row-fluid'>
      <div class='span12 article'>
        <h1>Simplifying Library Requires With $LOAD_PATH</h1>
        <h3 class='muted pull-right post_date'>
          Oct 26 2010
        </h3>
        When creating scripts or libraries which load custom libraries or modules in the past, I've generally loaded them in the following manner:
        
        <code>require File.join(File.dirname(__FILE__), "lib/foo")
        require File.join(File.dirname(__FILE__), "lib/bar")
        require File.join(File.dirname(__FILE__), "lib/baz")</code>
        
        This loads libraries by calling each of them with their absolute path. "File.dirname" gets the directory name for the current file (__FILE__). And "File.join" joins that directory name to "lib/xxx".
        
        Loading libraries in this way isn't the <a href="http://en.wikipedia.org/wiki/Don't_repeat_yourself">DRY</a>est way of doing things, so I was happy when I ran across this in the <a href="http://github.com/mynyml/watchr">Watchr</a> source code:
        
        <code>$LOAD_PATH.unshift(File.dirname(__FILE__))</code>
        
        $LOAD_PATH is a global array variable holding all the paths from which ruby loads libraries. Ruby searches for libraries proceeding from the path in element 0 to the path in the last element until it finds the requested library.
        
        The above snippet of code from <a href="http://github.com/mynyml/watchr">Watchr</a> places the current path at the front of the load path (unshift). Now, all following "require"s will look there first and then proceed normally through the standard paths.
        
        So now, rather than specifically calling each library with an absolute path, I can use the following:
        <code>
        $LOAD_PATH.unshift(File.dirname(__FILE__))</code>
        
        require 'foo'
        require 'bar'
        require 'baz'
      </div>
    </div>
  </div>
  <footer class='footer'>
    <div class='container'>
      <p class='pull-left muted'>
        Established 2005 &middot; Databasically &copy;
        2014
      </p>
      <p class='pull-right'>
        <a href='#'>Back to top</a>
      </p>
    </div>
  </footer>
  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2626511-3']);
    _gaq.push(['_setDomainName', 'databasically.com']);
    _gaq.push(['_trackPageview']);
    
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script>
    // Function to slabtext the H1 headings
    function slabTextHeadlines() {
        $("h1").slabText({
            // Don't slabtext the headers if the viewport is under 380px
            "viewportBreakpoint":380,
            "minCharsPerLine":9
        });
    };
    
    $(window).load(function() {
        slabTextHeadlines();
    });
  </script>
</body>
