<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>"warning: updating the current branch" when pushing to a git repository</title>
    <link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <script src="/javascripts/all.js" type="text/javascript"></script>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <meta content='Ruby enthusiasts, mostly based in Kansas City, KS, USA.' name='description'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:800,400,300' rel='stylesheet' type='text/css'>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
</html>
<body>
  <div class='container-narrow'>
    <div class='masthead'>
      <ul class='nav nav-pills pull-right'>
        <li>
          <a href='/'>Home</a>
        </li>
        <li>
          <a href='/articles'>Articles</a>
        </li>
        <li>
          <a href='/contact'>Contact</a>
        </li>
      </ul>
      <h3 class='muted'>
        <a href='/'>Databasically</a>
      </h3>
    </div>
    <div class='row-fluid'>
      <div class='span12 article'>
        <h1>"warning: updating the current branch" when pushing to a git repository</h1>
        <h3 class='muted pull-right post_date'>
          Mar  8 2010
        </h3>
        I pushed some changes after updating git on my server to git 1.6+ and now I get this:
        <pre class="highlight shell"><span class="gp">$ </span>git push origin master
        ...
        warning: updating the current branch
        warning: Updating the currently checked out branch may cause confusion,
        warning: as the index and work tree <span class="k">do </span>not reflect changes that are <span class="k">in </span>HEAD.
        warning: As a result, you may see the changes you just pushed into it
        warning: reverted when you run <span class="s1">'git diff'</span> over there, and you may want
        warning: to run <span class="s1">'git reset --hard'</span> before starting to work to recover.
        warning: 
        warning: You can <span class="nb">set</span> <span class="s1">'receive.denyCurrentBranch'</span> configuration variable to
        warning: <span class="s1">'refuse'</span> <span class="k">in </span>the remote repository to forbid pushing into its
        warning: current branch.
        warning: To allow pushing into the current branch, you can <span class="nb">set </span>it to <span class="s1">'ignore'</span>;
        warning: but this is not recommended unless you arranged to update its work
        warning: tree to match what you pushed <span class="k">in </span>some other way.
        warning: 
        warning: To squelch this message, you can <span class="nb">set </span>it to <span class="s1">'warn'</span>.
        warning: 
        warning: Note that the default will change <span class="k">in </span>a future version of git
        warning: to refuse updating the current branch unless you have the
        warning: configuration variable <span class="nb">set </span>to either <span class="s1">'ignore'</span> or <span class="s1">'warn'</span>.
        </pre>
        
        Woah!  After some research, this is because I didn't set up my remote folder as "bare". A non-bare repository has a working copy attached to it, and this warning is telling you that said working copy exists and is currently checked out to the branch you're trying to push to.
        
        This is bad, because if you were pushing to a co-worker's machine, then when they go to commit or run a diff, things will go awry.  In this case, I just didn't set up the repository correctly (it was the first one I'd done!) so I wasn't in danger of losing anything.
        
        The fix is to use <code>--bare</code>:
        <code>git init --bare</code> or <code>git clone --bare</code>
      </div>
    </div>
  </div>
  <footer class='footer'>
    <div class='container'>
      <p class='pull-left muted'>
        Established 2005 &middot; Databasically &copy;
        2014
      </p>
      <p class='pull-right'>
        <a href='#'>Back to top</a>
      </p>
    </div>
  </footer>
  <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2626511-3']);
    _gaq.push(['_setDomainName', 'databasically.com']);
    _gaq.push(['_trackPageview']);
    
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script>
    // Function to slabtext the H1 headings
    function slabTextHeadlines() {
        $("h1").slabText({
            // Don't slabtext the headers if the viewport is under 380px
            "viewportBreakpoint":380,
            "minCharsPerLine":9
        });
    };
    
    $(window).load(function() {
        slabTextHeadlines();
    });
  </script>
</body>
